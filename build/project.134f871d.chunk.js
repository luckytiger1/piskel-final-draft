(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{171:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);a(18);var r,i,n,o,s={pencil:null,bucket:null,colorPicker:null,eraser:null,stroke:null,sameFill:null},l={sizex32:null,sizex64:null,sizex128:null},c={startX:null,startY:null},u={firstCord:null,secondCord:null},d={allFrames:[]},h={count:1},f={drawing:!1},p=document.querySelector("#canvas"),v=p.getContext("2d"),m={value:null},g=(a(51),a(69),document.querySelector(".background-image-frame-container")),y=parseInt(document.querySelector(".display-fps").innerHTML,10),b=0;function w(e){requestAnimationFrame(w),o=(i=e)-n,0===parseInt(document.querySelector(".display-fps").innerHTML,10)&&(g.style.backgroundImage="url('".concat(document.querySelector(".preview-tile.selected").childNodes[0].firstElementChild.toDataURL(),"')")),o>r&&(n=i-o%r,document.querySelectorAll(".preview-tile").forEach((function(e,t){d.allFrames[t]=e.childNodes[0].firstElementChild.toDataURL()})),g.style.backgroundImage="url('".concat(d.allFrames[b],"')"),(b+=1)>=d.allFrames.length&&(b=0))}function k(e){r=1e3/e,n=window.performance.now(),w()}k(y);a(71),a(74),a(24),a(112),a(113),a(85),a(116),a(124),a(126),a(127),a(128),a(129),a(130),a(131),a(132),a(133),a(134),a(135),a(136),a(138),a(139),a(140),a(141),a(142),a(143),a(144),a(145),a(146),a(147),a(148);function S(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"reSize",value:function(e,t){var a=document.createElement("canvas"),r=a.getContext("2d");a.width=p.width,a.height=p.height,r.drawImage(p,0,0),p.width=e,p.height=t,v.imageSmoothingEnabled=!1,v.drawImage(a,0,0,a.width,a.height,0,0,p.width,p.height)}},{key:"showSize",value:function(e){switch(e){case"sizex128":l.sizex128=!0,this.changeActiveState("large-canvas");break;case"sizex64":l.sizex64=!0,this.changeActiveState("medium-canvas");break;case"sizex32":l.sizex32=!0,this.changeActiveState("small-canvas");break;default:l.sizex128=!0,this.changeActiveState("large-canvas")}}},{key:"changeActiveState",value:function(e){var t=document.querySelectorAll(".size-btn");[].forEach.call(t,(function(e){e.classList.remove("active")})),document.querySelector("#".concat(e)).classList.add("active")}},{key:"saveSize",value:function(){l.sizex32&&localStorage.setItem("currSize","sizex32"),l.sizex64&&localStorage.setItem("currSize","sizex64"),l.sizex128&&localStorage.setItem("currSize","sizex128")}},{key:"setSizeFlagToTrue",value:function(e){"size32"===e&&(l.sizex32=!0,l.sizex64=!1,l.sizex128=!1),"size64"===e&&(l.sizex32=!1,l.sizex64=!0,l.sizex128=!1),"size128"===e&&(l.sizex32=!1,l.sizex64=!1,l.sizex128=!0)}},{key:"setSize",value:function(){"128"===localStorage.getItem("canvasW")&&"128"===localStorage.getItem("canvasH")?(p.width=128,p.height=128):"64"===localStorage.getItem("canvasW")&&"64"===localStorage.getItem("canvasH")?(p.width=64,p.height=64):"32"===localStorage.getItem("canvasW")&&"32"===localStorage.getItem("canvasH")?(p.width=32,p.height=32):(p.width=128,p.height=128)}}])&&S(t.prototype,a),r&&S(t,r),e}();function E(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"showTool",value:function(e){switch(e){case"pencil":s.pencil=!0,this.changeActiveState("pencil");break;case"bucket":s.bucket=!0,this.changeActiveState("bucketBtn");break;case"colorPicker":s.colorPicker=!0,this.changeActiveState("chooseColorBtn");break;case"eraser":s.eraser=!0,this.changeActiveState("eraserBtn");break;case"stroke":s.stroke=!0,this.changeActiveState("strokeBtn");break;case"sameFill":s.sameFill=!0,this.changeActiveState("sameColorFillBtn");break;default:s.pencil=!0,this.changeActiveState("pencil")}}},{key:"saveTool",value:function(){s.pencil&&localStorage.setItem("currTool","pencil"),s.bucket&&localStorage.setItem("currTool","bucket"),s.colorPicker&&localStorage.setItem("currTool","colorPicker"),s.eraser&&localStorage.setItem("currTool","eraser"),s.stroke&&localStorage.setItem("currTool","stroke"),s.sameFill&&localStorage.setItem("currTool","sameFill")}},{key:"setToolFlagToTrue",value:function(e){"pencil"===e&&this.setPencilToTrue(),"bucket"===e&&this.setBucketToTrue(),"colorPicker"===e&&this.setColorPickerToTrue(),"eraser"===e&&this.setEraserToTrue(),"stroke"===e&&this.setStrokeToTrue(),"sameFill"===e&&this.setsameFillToTrue()}},{key:"setPencilToTrue",value:function(){s.pencil=!0,s.bucket=!1,s.colorPicker=!1,s.eraser=!1,s.stroke=!1,s.sameFill=!1}},{key:"setBucketToTrue",value:function(){s.pencil=!1,s.bucket=!0,s.colorPicker=!1,s.eraser=!1,s.stroke=!1,s.sameFill=!1}},{key:"setColorPickerToTrue",value:function(){s.pencil=!1,s.bucket=!1,s.colorPicker=!0,s.eraser=!1,s.stroke=!1,s.sameFill=!1}},{key:"setEraserToTrue",value:function(){s.pencil=!1,s.bucket=!1,s.colorPicker=!1,s.eraser=!0,s.stroke=!1,s.sameFill=!1}},{key:"setStrokeToTrue",value:function(){s.pencil=!1,s.bucket=!1,s.colorPicker=!1,s.eraser=!1,s.stroke=!0,s.sameFill=!1}},{key:"setsameFillToTrue",value:function(){s.pencil=!1,s.bucket=!1,s.colorPicker=!1,s.eraser=!1,s.stroke=!1,s.sameFill=!0}},{key:"changeActiveState",value:function(e){var t=document.querySelectorAll(".list-item");[].forEach.call(t,(function(e){e.classList.remove("active")})),document.querySelector(".list-item.".concat(e)).classList.add("active")}}])&&E(t.prototype,a),r&&E(t,r),e}();function I(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"pickColor",value:function(e,t){var a=e.offsetX,r=e.offsetY,i=v.getImageData(a/t,r/t,t,t).data,n="rgba(".concat(i[0],", ").concat(i[1],", ").concat(i[2],", ").concat(i[3]/255,")");document.querySelector(".curr-color").style.background=n,v.fillStyle=n}},{key:"showColors",value:function(){document.querySelector(".curr-color").style.background=localStorage.getItem("currColorOld")?localStorage.getItem("currColorOld"):"#ff0000",document.querySelector(".prev-color-btn").style.background=localStorage.getItem("prevColorOld")?localStorage.getItem("prevColorOld"):"#0000ff"}},{key:"setColor",value:function(){}},{key:"saveColors",value:function(){var e=document.querySelector(".prev-color-btn").style.background,t=document.querySelector(".curr-color").style.background;localStorage.setItem("currColorOld",t),localStorage.setItem("prevColorOld",e)}},{key:"changeColor",value:function(e){v.fillStyle=".red-btn"===e?"#ff0000":"#0000ff",document.querySelector(".curr-color").style.background=".red-btn"===e?"#ff0000":"#0000ff"}},{key:"checkMouseBtn",value:function(e){2===e.button?(v.strokeStyle=document.querySelector(".prev-color-btn").style.background,v.fillStyle=document.querySelector(".prev-color-btn").style.background,m.value=document.querySelector(".prev-color-btn").style.background):0===e.button&&(v.strokeStyle=document.querySelector(".curr-color").style.background,v.fillStyle=document.querySelector(".curr-color").style.background,m.value=document.querySelector(".curr-color").style.background)}}])&&I(t.prototype,a),r&&I(t,r),e}();function q(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.size=new x,this.tool=new C,this.color=new F}var t,a,r;return t=e,(a=[{key:"loadCanvas",value:function(){this.size.setSize(),document.querySelector("#penx1").checked=!0;var e=localStorage.getItem("currSize"),t=localStorage.getItem("currTool");this.size.showSize(e),this.tool.showTool(t),this.color.showColors();var a=localStorage.getItem("prev-canvas"),r=new Image;r.src=a,r.onload=function(){v.drawImage(r,0,0)},console.log(s),console.log(l),document.querySelector(".range-fps").value=0,document.querySelector(".display-fps").innerHTML="".concat(document.querySelector(".range-fps").value," FPS")}},{key:"drawLine",value:function(e,t,a,r,i){var n=Math.abs(t-e),o=Math.abs(r-a),s=e<t?1:-1,l=a<r?1:-1,c=n-o;for(v.imageSmoothingEnabled=!1;v.fillRect(e,a,i,i),v.fill(),e!==t||a!==r;){var u=2*c;u>-o&&(c-=o,e+=s),u<n&&(c+=n,a+=l)}}},{key:"draw",value:function(e,t,a){var r=Math.floor(e.offsetX/t),i=Math.floor(e.offsetY/t);v.fillRect(r,i,a,a),v.fill()}},{key:"eraserTool",value:function(){v.globalCompositeOperation="destination-out"}},{key:"updateCanvas",value:function(){var e=document.querySelector(".preview-tile.selected").childNodes[0].firstElementChild.toDataURL(),t=new Image;t.src=e,v.clearRect(0,0,p.width,p.height),t.onload=function(){v.drawImage(t,0,0,p.width,p.height)}}},{key:"strokeLine",value:function(e,t,a,r,i){v.imageSmoothingEnabled=!1,v.clearRect(0,0,p.width,p.height);var n=new Image;n.src=localStorage.getItem("prev-canvas"),v.drawImage(n,0,0,p.width,p.height),v.lineWidth=i,v.beginPath(),console.log("x0 is ".concat(e,",y0 is ").concat(a+.5," and x1 is ").concat(t,",y1 is ").concat(r+.5)),v.moveTo(t,r+.5),v.lineTo(e,a+.5),v.stroke()}},{key:"getPixel",value:function(e,t,a){return t<0||a<0||t>=e.width||a>=e.height?-1:e.data[a*e.width+t]}},{key:"fillCanvas",value:function(e,t){var a=v.getImageData(e,t,1,1).data,r="rgb(".concat(a[0],", ").concat(a[1],", ").concat(a[2],")");if(r!==m.value){v.fillRect(e,t,1,1);var i=[];for(i.push([e,t]);i.length;)if(e+1>0&&e+1<p.width&&r===this.getColorFromPixel(v.getImageData(e+1,t,1,1).data)&&(i.push([e+1,t]),v.fillRect(e+1,t,1,1)),e-1>=0&&e-1<p.width&&r===this.getColorFromPixel(v.getImageData(e-1,t,1,1).data)&&(i.push([e-1,t]),v.fillRect(e-1,t,1,1)),t+1>0&&t+1<p.width&&r===this.getColorFromPixel(v.getImageData(e,t+1,1,1).data)&&(i.push([e,t+1]),v.fillRect(e,t+1,1,1)),t-1>=0&&t-1<p.width&&r===this.getColorFromPixel(v.getImageData(e,t-1,1,1).data)&&(i.push([e,t-1]),v.fillRect(e,t-1,1,1)),i.shift(0),i.length>0){var n=[i[0][0],i[0][1]];e=n[0],t=n[1]}i=[]}}},{key:"fillSameColors",value:function(e,t){for(var a=v.getImageData(e,t,1,1).data,r="rgb(".concat(a[0],", ").concat(a[1],", ").concat(a[2],")"),i=0;i<p.width;i+=1)for(var n=0;n<p.height;n+=1){var o=v.getImageData(i,n,1,1).data;"rgb(".concat(o[0],", ").concat(o[1],", ").concat(o[2],")")===r&&v.fillRect(i,n,1,1)}}},{key:"getColorFromPixel",value:function(e){return"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")")}},{key:"isCanvasBlank",value:function(){return!new Uint32Array(v.getImageData(0,0,p.width,p.height).data.buffer).some((function(e){return 0!==e}))}},{key:"pickColor",value:function(e,t,a){var r=v.getImageData(e,t,1,1).data,i="rgba(".concat(r[0],", ").concat(r[1],", ").concat(r[2],", ").concat(r[3]/255,")");0===a.button?document.querySelector(".curr-color").style.background=i:2===a.button&&(document.querySelector(".prev-color-btn").style.background=i)}},{key:"saveCanvas",value:function(){var e=p.toDataURL();localStorage.setItem("prev-canvas",e)}}])&&q(t.prototype,a),r&&q(t,r),e}();a(149),a(150);function z(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=new T}var t,a,r;return t=e,(a=[{key:"createFrame",value:function(e){var t=document.createElement("li");t.classList.add("preview-tile");var a=document.createElement("canvas");a.id="preview-canvas",a.width=128,a.height=128;var r=document.createElement("div"),i=document.createElement("div");i.className="canvas-background",r.className="canvas-container";var n=document.querySelector("#preview-list"),o=this.addDeleteFrameBtn(),s=this.addDuplicateFrameBtn(),l=this.addDnDBtn();t.append(o,s,l),n.append(t),t.prepend(r),t.setAttribute("data-tile-number",parseInt(e,10)),r.append(a,i),this.changeBtnStyle(),v.clearRect(0,0,p.width,p.height);var c=document.querySelectorAll(".preview-tile");[].forEach.call(c,(function(e){e.classList.remove("selected")})),t.classList.add("selected")}},{key:"firstFrameOnFirstLoad",value:function(){var e=document.querySelector(".preview-tile").childNodes[0].firstElementChild,t=localStorage.getItem("prev-canvas"),a=new Image;a.src=t,e.getContext("2d").imageSmoothingEnabled=!1,a.onload=function(){document.querySelector(".preview-tile").childNodes[0].firstElementChild.getContext("2d").drawImage(a,0,0,p.width,p.height,0,0,e.width,e.height)}}},{key:"showPreviewFrame",value:function(){var e=document.querySelector(".preview-tile.selected").childNodes[0].firstElementChild,t=e.getContext("2d"),a=new Image;a.src=localStorage.getItem("prev-canvas"),t.imageSmoothingEnabled=!1,t.clearRect(0,0,e.width,e.height),a.onload=function(){t.drawImage(a,0,0,p.width,p.height,0,0,e.width,e.height)}}},{key:"addDnDBtn",value:function(){var e=document.createElement("div");return e.classList.add("tile-overlay","dnd-frame","dnd-frame-icon"),e}},{key:"addDeleteFrameBtn",value:function(){var e=document.createElement("button");return e.classList.add("delete-frame","delete-frame-icon","tile-overlay"),e}},{key:"addDuplicateFrameBtn",value:function(){var e=document.createElement("button");return e.classList.add("duplicate-frame","duplicate-frame-icon","tile-overlay"),e}},{key:"deleteFrame",value:function(e){var t=e.target.parentNode;this.changeSelectedTile(e),document.querySelector("#preview-list").removeChild(t),d.allFrames.length-=1;var a=e.target.parentElement.childNodes[0].firstElementChild.toDataURL(),r=d.allFrames.indexOf(a);-1!==r&&d.allFrames.splice(r,1),this.changeBtnStyle()}},{key:"duplicateFrame",value:function(e){e.target.parentElement.classList.contains("selected")&&e.target.parentElement.classList.remove("selected");var t=e.target.parentElement,a=t.cloneNode(!0),r=t.childNodes[0].firstElementChild;a.childNodes[0].firstElementChild.getContext("2d").drawImage(r,0,0);var i=document.querySelectorAll(".preview-tile");[].forEach.call(i,(function(e){e.classList.remove("selected")})),a.classList.add("selected"),this.updateCurrentCanvas(r),t.after(a),this.changeBtnStyle()}},{key:"dropFrame",value:function(e){var t=e;t.style.position="relative",t.style.zIndex=1e3,t.style.left=""}},{key:"dragFrame",value:function(e,t){var a=t;a.style.left="".concat(e.pageX-a.offsetWidth/2,"px")}},{key:"updateCurrentCanvas",value:function(e){v.clearRect(0,0,p.width,p.height),v.drawImage(e,0,0,e.width,e.height,0,0,p.width,p.height)}},{key:"changeSelectedTile",value:function(e){e.target.parentElement.classList.contains("selected")&&(e.target.parentElement.previousElementSibling?(e.target.parentElement.previousElementSibling.classList.add("selected"),this.updateCanvasAfterDeletion(e.target.parentElement.previousElementSibling)):(e.target.parentElement.nextElementSibling.classList.add("selected"),this.updateCanvasAfterDeletion(e.target.parentElement.nextElementSibling)))}},{key:"updateCanvasAfterDeletion",value:function(e){console.log("canvas updated"),console.log(e);var t=e.childNodes[0].firstElementChild;console.log(t);var a=new Image;a.src=t.toDataURL(),t.getContext("2d").imageSmoothingEnabled=!1,v.clearRect(0,0,p.width,p.height),v.drawImage(a,0,0,t.width,t.height,0,0,p.width,p.height)}},{key:"changeBtnStyle",value:function(){document.querySelectorAll(".preview-tile").length<=1?(document.querySelector(".delete-frame").style.display="none",document.querySelector(".dnd-frame").style.display="none"):(document.querySelector(".delete-frame").style.display="block",document.querySelector(".dnd-frame").style.display="block")}}])&&z(t.prototype,a),r&&z(t,r),e}(),B=(a(89),a(151),a(152),a(56)),_=a.n(B);function L(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a(56);var A=a(159),j=a(170),D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"saveAsGIF",value:function(){var e=this,t=parseInt(document.querySelector(".display-fps").innerHTML,10),a=new Blob(['// gif.worker.js 0.2.0 - https://github.com/jnordberg/gif.js\n(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module \'"+o+"\'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var NeuQuant=require("./TypedNeuQuant.js");var LZWEncoder=require("./LZWEncoder.js");function ByteArray(){this.page=-1;this.pages=[];this.newPage()}ByteArray.pageSize=4096;ByteArray.charMap={};for(var i=0;i<256;i++)ByteArray.charMap[i]=String.fromCharCode(i);ByteArray.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(ByteArray.pageSize);this.cursor=0};ByteArray.prototype.getData=function(){var rv="";for(var p=0;p<this.pages.length;p++){for(var i=0;i<ByteArray.pageSize;i++){rv+=ByteArray.charMap[this.pages[p][i]]}}return rv};ByteArray.prototype.writeByte=function(val){if(this.cursor>=ByteArray.pageSize)this.newPage();this.pages[this.page][this.cursor++]=val};ByteArray.prototype.writeUTFBytes=function(string){for(var l=string.length,i=0;i<l;i++)this.writeByte(string.charCodeAt(i))};ByteArray.prototype.writeBytes=function(array,offset,length){for(var l=length||array.length,i=offset||0;i<l;i++)this.writeByte(array[i])};function GIFEncoder(width,height){this.width=~~width;this.height=~~height;this.transparent=null;this.transIndex=0;this.repeat=-1;this.delay=0;this.image=null;this.pixels=null;this.indexedPixels=null;this.colorDepth=null;this.colorTab=null;this.neuQuant=null;this.usedEntry=new Array;this.palSize=7;this.dispose=-1;this.firstFrame=true;this.sample=10;this.dither=false;this.globalPalette=false;this.out=new ByteArray}GIFEncoder.prototype.setDelay=function(milliseconds){this.delay=Math.round(milliseconds/10)};GIFEncoder.prototype.setFrameRate=function(fps){this.delay=Math.round(100/fps)};GIFEncoder.prototype.setDispose=function(disposalCode){if(disposalCode>=0)this.dispose=disposalCode};GIFEncoder.prototype.setRepeat=function(repeat){this.repeat=repeat};GIFEncoder.prototype.setTransparent=function(color){this.transparent=color};GIFEncoder.prototype.addFrame=function(imageData){this.image=imageData;this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null;this.getImagePixels();this.analyzePixels();if(this.globalPalette===true)this.globalPalette=this.colorTab;if(this.firstFrame){this.writeLSD();this.writePalette();if(this.repeat>=0){this.writeNetscapeExt()}}this.writeGraphicCtrlExt();this.writeImageDesc();if(!this.firstFrame&&!this.globalPalette)this.writePalette();this.writePixels();this.firstFrame=false};GIFEncoder.prototype.finish=function(){this.out.writeByte(59)};GIFEncoder.prototype.setQuality=function(quality){if(quality<1)quality=1;this.sample=quality};GIFEncoder.prototype.setDither=function(dither){if(dither===true)dither="FloydSteinberg";this.dither=dither};GIFEncoder.prototype.setGlobalPalette=function(palette){this.globalPalette=palette};GIFEncoder.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};GIFEncoder.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};GIFEncoder.prototype.analyzePixels=function(){if(!this.colorTab){this.neuQuant=new NeuQuant(this.pixels,this.sample);this.neuQuant.buildColormap();this.colorTab=this.neuQuant.getColormap()}if(this.dither){this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null)}else{this.indexPixels()}this.pixels=null;this.colorDepth=8;this.palSize=7;if(this.transparent!==null){this.transIndex=this.findClosest(this.transparent,true)}};GIFEncoder.prototype.indexPixels=function(imgq){var nPix=this.pixels.length/3;this.indexedPixels=new Uint8Array(nPix);var k=0;for(var j=0;j<nPix;j++){var index=this.findClosestRGB(this.pixels[k++]&255,this.pixels[k++]&255,this.pixels[k++]&255);this.usedEntry[index]=true;this.indexedPixels[j]=index}};GIFEncoder.prototype.ditherPixels=function(kernel,serpentine){var kernels={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!kernel||!kernels[kernel]){throw"Unknown dithering kernel: "+kernel}var ds=kernels[kernel];var index=0,height=this.height,width=this.width,data=this.pixels;var direction=serpentine?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var y=0;y<height;y++){if(serpentine)direction=direction*-1;for(var x=direction==1?0:width-1,xend=direction==1?width:0;x!==xend;x+=direction){index=y*width+x;var idx=index*3;var r1=data[idx];var g1=data[idx+1];var b1=data[idx+2];idx=this.findClosestRGB(r1,g1,b1);this.usedEntry[idx]=true;this.indexedPixels[index]=idx;idx*=3;var r2=this.colorTab[idx];var g2=this.colorTab[idx+1];var b2=this.colorTab[idx+2];var er=r1-r2;var eg=g1-g2;var eb=b1-b2;for(var i=direction==1?0:ds.length-1,end=direction==1?ds.length:0;i!==end;i+=direction){var x1=ds[i][1];var y1=ds[i][2];if(x1+x>=0&&x1+x<width&&y1+y>=0&&y1+y<height){var d=ds[i][0];idx=index+x1+y1*width;idx*=3;data[idx]=Math.max(0,Math.min(255,data[idx]+er*d));data[idx+1]=Math.max(0,Math.min(255,data[idx+1]+eg*d));data[idx+2]=Math.max(0,Math.min(255,data[idx+2]+eb*d))}}}}};GIFEncoder.prototype.findClosest=function(c,used){return this.findClosestRGB((c&16711680)>>16,(c&65280)>>8,c&255,used)};GIFEncoder.prototype.findClosestRGB=function(r,g,b,used){if(this.colorTab===null)return-1;if(this.neuQuant&&!used){return this.neuQuant.lookupRGB(r,g,b)}var c=b|g<<8|r<<16;var minpos=0;var dmin=256*256*256;var len=this.colorTab.length;for(var i=0,index=0;i<len;index++){var dr=r-(this.colorTab[i++]&255);var dg=g-(this.colorTab[i++]&255);var db=b-(this.colorTab[i++]&255);var d=dr*dr+dg*dg+db*db;if((!used||this.usedEntry[index])&&d<dmin){dmin=d;minpos=index}}return minpos};GIFEncoder.prototype.getImagePixels=function(){var w=this.width;var h=this.height;this.pixels=new Uint8Array(w*h*3);var data=this.image;var srcPos=0;var count=0;for(var i=0;i<h;i++){for(var j=0;j<w;j++){this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];this.pixels[count++]=data[srcPos++];srcPos++}}};GIFEncoder.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33);this.out.writeByte(249);this.out.writeByte(4);var transp,disp;if(this.transparent===null){transp=0;disp=0}else{transp=1;disp=2}if(this.dispose>=0){disp=dispose&7}disp<<=2;this.out.writeByte(0|disp|0|transp);this.writeShort(this.delay);this.out.writeByte(this.transIndex);this.out.writeByte(0)};GIFEncoder.prototype.writeImageDesc=function(){this.out.writeByte(44);this.writeShort(0);this.writeShort(0);this.writeShort(this.width);this.writeShort(this.height);if(this.firstFrame||this.globalPalette){this.out.writeByte(0)}else{this.out.writeByte(128|0|0|0|this.palSize)}};GIFEncoder.prototype.writeLSD=function(){this.writeShort(this.width);this.writeShort(this.height);this.out.writeByte(128|112|0|this.palSize);this.out.writeByte(0);this.out.writeByte(0)};GIFEncoder.prototype.writeNetscapeExt=function(){this.out.writeByte(33);this.out.writeByte(255);this.out.writeByte(11);this.out.writeUTFBytes("NETSCAPE2.0");this.out.writeByte(3);this.out.writeByte(1);this.writeShort(this.repeat);this.out.writeByte(0)};GIFEncoder.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);var n=3*256-this.colorTab.length;for(var i=0;i<n;i++)this.out.writeByte(0)};GIFEncoder.prototype.writeShort=function(pValue){this.out.writeByte(pValue&255);this.out.writeByte(pValue>>8&255)};GIFEncoder.prototype.writePixels=function(){var enc=new LZWEncoder(this.width,this.height,this.indexedPixels,this.colorDepth);enc.encode(this.out)};GIFEncoder.prototype.stream=function(){return this.out};module.exports=GIFEncoder},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(require,module,exports){var EOF=-1;var BITS=12;var HSIZE=5003;var masks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function LZWEncoder(width,height,pixels,colorDepth){var initCodeSize=Math.max(2,colorDepth);var accum=new Uint8Array(256);var htab=new Int32Array(HSIZE);var codetab=new Int32Array(HSIZE);var cur_accum,cur_bits=0;var a_count;var free_ent=0;var maxcode;var clear_flg=false;var g_init_bits,ClearCode,EOFCode;function char_out(c,outs){accum[a_count++]=c;if(a_count>=254)flush_char(outs)}function cl_block(outs){cl_hash(HSIZE);free_ent=ClearCode+2;clear_flg=true;output(ClearCode,outs)}function cl_hash(hsize){for(var i=0;i<hsize;++i)htab[i]=-1}function compress(init_bits,outs){var fcode,c,i,ent,disp,hsize_reg,hshift;g_init_bits=init_bits;clear_flg=false;n_bits=g_init_bits;maxcode=MAXCODE(n_bits);ClearCode=1<<init_bits-1;EOFCode=ClearCode+1;free_ent=ClearCode+2;a_count=0;ent=nextPixel();hshift=0;for(fcode=HSIZE;fcode<65536;fcode*=2)++hshift;hshift=8-hshift;hsize_reg=HSIZE;cl_hash(hsize_reg);output(ClearCode,outs);outer_loop:while((c=nextPixel())!=EOF){fcode=(c<<BITS)+ent;i=c<<hshift^ent;if(htab[i]===fcode){ent=codetab[i];continue}else if(htab[i]>=0){disp=hsize_reg-i;if(i===0)disp=1;do{if((i-=disp)<0)i+=hsize_reg;if(htab[i]===fcode){ent=codetab[i];continue outer_loop}}while(htab[i]>=0)}output(ent,outs);ent=c;if(free_ent<1<<BITS){codetab[i]=free_ent++;htab[i]=fcode}else{cl_block(outs)}}output(ent,outs);output(EOFCode,outs)}function encode(outs){outs.writeByte(initCodeSize);remaining=width*height;curPixel=0;compress(initCodeSize+1,outs);outs.writeByte(0)}function flush_char(outs){if(a_count>0){outs.writeByte(a_count);outs.writeBytes(accum,0,a_count);a_count=0}}function MAXCODE(n_bits){return(1<<n_bits)-1}function nextPixel(){if(remaining===0)return EOF;--remaining;var pix=pixels[curPixel++];return pix&255}function output(code,outs){cur_accum&=masks[cur_bits];if(cur_bits>0)cur_accum|=code<<cur_bits;else cur_accum=code;cur_bits+=n_bits;while(cur_bits>=8){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}if(free_ent>maxcode||clear_flg){if(clear_flg){maxcode=MAXCODE(n_bits=g_init_bits);clear_flg=false}else{++n_bits;if(n_bits==BITS)maxcode=1<<BITS;else maxcode=MAXCODE(n_bits)}}if(code==EOFCode){while(cur_bits>0){char_out(cur_accum&255,outs);cur_accum>>=8;cur_bits-=8}flush_char(outs)}}this.encode=encode}module.exports=LZWEncoder},{}],3:[function(require,module,exports){var ncycles=100;var netsize=256;var maxnetpos=netsize-1;var netbiasshift=4;var intbiasshift=16;var intbias=1<<intbiasshift;var gammashift=10;var gamma=1<<gammashift;var betashift=10;var beta=intbias>>betashift;var betagamma=intbias<<gammashift-betashift;var initrad=netsize>>3;var radiusbiasshift=6;var radiusbias=1<<radiusbiasshift;var initradius=initrad*radiusbias;var radiusdec=30;var alphabiasshift=10;var initalpha=1<<alphabiasshift;var alphadec;var radbiasshift=8;var radbias=1<<radbiasshift;var alpharadbshift=alphabiasshift+radbiasshift;var alpharadbias=1<<alpharadbshift;var prime1=499;var prime2=491;var prime3=487;var prime4=503;var minpicturebytes=3*prime4;function NeuQuant(pixels,samplefac){var network;var netindex;var bias;var freq;var radpower;function init(){network=[];netindex=new Int32Array(256);bias=new Int32Array(netsize);freq=new Int32Array(netsize);radpower=new Int32Array(netsize>>3);var i,v;for(i=0;i<netsize;i++){v=(i<<netbiasshift+8)/netsize;network[i]=new Float64Array([v,v,v,0]);freq[i]=intbias/netsize;bias[i]=0}}function unbiasnet(){for(var i=0;i<netsize;i++){network[i][0]>>=netbiasshift;network[i][1]>>=netbiasshift;network[i][2]>>=netbiasshift;network[i][3]=i}}function altersingle(alpha,i,b,g,r){network[i][0]-=alpha*(network[i][0]-b)/initalpha;network[i][1]-=alpha*(network[i][1]-g)/initalpha;network[i][2]-=alpha*(network[i][2]-r)/initalpha}function alterneigh(radius,i,b,g,r){var lo=Math.abs(i-radius);var hi=Math.min(i+radius,netsize);var j=i+1;var k=i-1;var m=1;var p,a;while(j<hi||k>lo){a=radpower[m++];if(j<hi){p=network[j++];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}if(k>lo){p=network[k--];p[0]-=a*(p[0]-b)/alpharadbias;p[1]-=a*(p[1]-g)/alpharadbias;p[2]-=a*(p[2]-r)/alpharadbias}}}function contest(b,g,r){var bestd=~(1<<31);var bestbiasd=bestd;var bestpos=-1;var bestbiaspos=bestpos;var i,n,dist,biasdist,betafreq;for(i=0;i<netsize;i++){n=network[i];dist=Math.abs(n[0]-b)+Math.abs(n[1]-g)+Math.abs(n[2]-r);if(dist<bestd){bestd=dist;bestpos=i}biasdist=dist-(bias[i]>>intbiasshift-netbiasshift);if(biasdist<bestbiasd){bestbiasd=biasdist;bestbiaspos=i}betafreq=freq[i]>>betashift;freq[i]-=betafreq;bias[i]+=betafreq<<gammashift}freq[bestpos]+=beta;bias[bestpos]-=betagamma;return bestbiaspos}function inxbuild(){var i,j,p,q,smallpos,smallval,previouscol=0,startpos=0;for(i=0;i<netsize;i++){p=network[i];smallpos=i;smallval=p[1];for(j=i+1;j<netsize;j++){q=network[j];if(q[1]<smallval){smallpos=j;smallval=q[1]}}q=network[smallpos];if(i!=smallpos){j=q[0];q[0]=p[0];p[0]=j;j=q[1];q[1]=p[1];p[1]=j;j=q[2];q[2]=p[2];p[2]=j;j=q[3];q[3]=p[3];p[3]=j}if(smallval!=previouscol){netindex[previouscol]=startpos+i>>1;for(j=previouscol+1;j<smallval;j++)netindex[j]=i;previouscol=smallval;startpos=i}}netindex[previouscol]=startpos+maxnetpos>>1;for(j=previouscol+1;j<256;j++)netindex[j]=maxnetpos}function inxsearch(b,g,r){var a,p,dist;var bestd=1e3;var best=-1;var i=netindex[g];var j=i-1;while(i<netsize||j>=0){if(i<netsize){p=network[i];dist=p[1]-g;if(dist>=bestd)i=netsize;else{i++;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}if(j>=0){p=network[j];dist=g-p[1];if(dist>=bestd)j=-1;else{j--;if(dist<0)dist=-dist;a=p[0]-b;if(a<0)a=-a;dist+=a;if(dist<bestd){a=p[2]-r;if(a<0)a=-a;dist+=a;if(dist<bestd){bestd=dist;best=p[3]}}}}}return best}function learn(){var i;var lengthcount=pixels.length;var alphadec=30+(samplefac-1)/3;var samplepixels=lengthcount/(3*samplefac);var delta=~~(samplepixels/ncycles);var alpha=initalpha;var radius=initradius;var rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(i=0;i<rad;i++)radpower[i]=alpha*((rad*rad-i*i)*radbias/(rad*rad));var step;if(lengthcount<minpicturebytes){samplefac=1;step=3}else if(lengthcount%prime1!==0){step=3*prime1}else if(lengthcount%prime2!==0){step=3*prime2}else if(lengthcount%prime3!==0){step=3*prime3}else{step=3*prime4}var b,g,r,j;var pix=0;i=0;while(i<samplepixels){b=(pixels[pix]&255)<<netbiasshift;g=(pixels[pix+1]&255)<<netbiasshift;r=(pixels[pix+2]&255)<<netbiasshift;j=contest(b,g,r);altersingle(alpha,j,b,g,r);if(rad!==0)alterneigh(rad,j,b,g,r);pix+=step;if(pix>=lengthcount)pix-=lengthcount;i++;if(delta===0)delta=1;if(i%delta===0){alpha-=alpha/alphadec;radius-=radius/radiusdec;rad=radius>>radiusbiasshift;if(rad<=1)rad=0;for(j=0;j<rad;j++)radpower[j]=alpha*((rad*rad-j*j)*radbias/(rad*rad))}}}function buildColormap(){init();learn();unbiasnet();inxbuild()}this.buildColormap=buildColormap;function getColormap(){var map=[];var index=[];for(var i=0;i<netsize;i++)index[network[i][3]]=i;var k=0;for(var l=0;l<netsize;l++){var j=index[l];map[k++]=network[j][0];map[k++]=network[j][1];map[k++]=network[j][2]}return map}this.getColormap=getColormap;this.lookupRGB=inxsearch}module.exports=NeuQuant},{}],4:[function(require,module,exports){var GIFEncoder,renderFrame;GIFEncoder=require("./GIFEncoder.js");renderFrame=function(frame){var encoder,page,stream,transfer;encoder=new GIFEncoder(frame.width,frame.height);if(frame.index===0){encoder.writeHeader()}else{encoder.firstFrame=false}encoder.setTransparent(frame.transparent);encoder.setRepeat(frame.repeat);encoder.setDelay(frame.delay);encoder.setQuality(frame.quality);encoder.setDither(frame.dither);encoder.setGlobalPalette(frame.globalPalette);encoder.addFrame(frame.data);if(frame.last){encoder.finish()}if(frame.globalPalette===true){frame.globalPalette=encoder.getGlobalPalette()}stream=encoder.stream();frame.data=stream.pages;frame.cursor=stream.cursor;frame.pageSize=stream.constructor.pageSize;if(frame.canTransfer){transfer=function(){var i,len,ref,results;ref=frame.data;results=[];for(i=0,len=ref.length;i<len;i++){page=ref[i];results.push(page.buffer)}return results}();return self.postMessage(frame,transfer)}else{return self.postMessage(frame)}};self.onmessage=function(event){return renderFrame(event.data)}},{"./GIFEncoder.js":1}]},{},[4]);\n//# sourceMappingURL=gif.worker.js.map'],{type:"application/javascript"}),r=new _.a({workers:2,quality:10,workerScript:URL.createObjectURL(a)});document.querySelectorAll(".preview-tile").forEach((function(a){var i=a.childNodes[0].firstElementChild,n=e.setTempCanvas(i);r.addFrame(n,{delay:1e3/t,copy:!0})})),r.on("finished",(function(e){j(e,"piskel-clone.gif","gif")})),r.render()}},{key:"saveAsAPNG",value:function(){var e=this,t=parseInt(document.querySelector(".display-fps").innerHTML,10),a=[],r=new Array(d.allFrames.length).fill(1e3/t);document.querySelectorAll(".preview-tile").forEach((function(t){var r=t.childNodes[0].firstElementChild,i=e.setTempCanvas(r).getContext("2d").getImageData(0,0,512,512).data.buffer;a.push(i)}));var i=A.encode(a,512,512,0,r);j(i,"piskel-clone.apng","apng")}},{key:"setTempCanvas",value:function(e){var t=document.createElement("canvas"),a=t.getContext("2d");return t.width=512,t.height=512,a.drawImage(e,0,0,512,512),t}}])&&L(t.prototype,a),r&&L(t,r),e}();function G(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=new T,this.size=new x,this.tool=new C,this.color=new F,this.frame=new P,this.save=new D}var t,a,r;return t=e,(a=[{key:"loadItems",value:function(){window.addEventListener("DOMContentLoaded",(function(){null===localStorage.getItem("currSize")&&(l.sizex32=!0),null===localStorage.getItem("currTool")&&(s.pencil=!0),null===localStorage.getItem("currColorOld")&&(v.fillStyle="#ff0000")}))}},{key:"canvasEvents",value:function(){var e=this;p.addEventListener("mousedown",(function(t){f.drawing=!0,e.color.checkMouseBtn(t),l.sizex128&&e.setToolForDrawing(t,4),l.sizex64&&e.setToolForDrawing(t,8),l.sizex32&&e.setToolForDrawing(t,16)})),p.oncontextmenu=function(e){e.preventDefault()},p.addEventListener("mouseup",(function(){f.drawing=!1,e.canvas.saveCanvas(),e.frame.showPreviewFrame()})),p.addEventListener("mousemove",(function(t){l.sizex128&&e.onMouseMove(t,4),l.sizex64&&e.onMouseMove(t,8),l.sizex32&&e.onMouseMove(t,16)})),p.addEventListener("mouseout",(function(){f.drawing=!1}))}},{key:"sizeBtnHandler",value:function(){var e=this;document.querySelector("#small-canvas").addEventListener("click",(function(){e.handleSize(32,"size32","small-canvas")})),document.querySelector("#medium-canvas").addEventListener("click",(function(){e.handleSize(64,"size64","medium-canvas")})),document.querySelector("#large-canvas").addEventListener("click",(function(){e.handleSize(128,"size128","large-canvas")}))}},{key:"toolsHandler",value:function(){var e=this;document.querySelector(".bucketBtn").addEventListener("click",(function(t){e.tool.setToolFlagToTrue("bucket"),e.tool.changeActiveState("bucketBtn"),e.color.checkMouseBtn(t)})),document.querySelector(".choose-color-btn").addEventListener("click",(function(){e.tool.setToolFlagToTrue("colorPicker"),e.tool.changeActiveState("chooseColorBtn")})),document.querySelector(".pencil-btn").addEventListener("click",(function(){e.tool.setToolFlagToTrue("pencil"),e.tool.changeActiveState("pencil")})),document.querySelector(".eraser-btn").addEventListener("click",(function(){e.tool.setToolFlagToTrue("eraser"),e.tool.changeActiveState("eraserBtn")})),document.querySelector(".stroke-btn").addEventListener("click",(function(){e.tool.setToolFlagToTrue("stroke"),e.tool.changeActiveState("strokeBtn")})),document.querySelector(".same-color-fill-btn").addEventListener("click",(function(){e.tool.setToolFlagToTrue("sameFill"),e.tool.changeActiveState("sameColorFillBtn")}))}},{key:"keyShortcutHandler",value:function(){document.addEventListener("keydown",(function(e){if("input"!==e.target.nodeName.toLowerCase())switch(e.code){case"KeyP":document.querySelector(".pencil-btn").click();break;case"KeyB":document.querySelector(".bucketBtn").click();break;case"KeyC":document.querySelector(".choose-color-btn").click()}}))}},{key:"fullscreenHandler",value:function(){document.querySelector(".background-image-frame-container").addEventListener("click",(function(e){"fullscreenEnabled"in document?document.fullscreenEnabled&&(console.log("User allows fullscreen"),"requestFullscreen"in e.target&&e.target.requestFullscreen()):console.log("User doesn't allow full screen")}))}},{key:"loginHandler",value:function(){netlifyIdentity.on("login",(function(){var e=document.querySelector(".login-text"),t=document.querySelector(".profile-pic");e.style.display="block",t.style.backgroundImage="url('".concat(netlifyIdentity.currentUser().user_metadata.avatar_url,"')"),e.innerText=" Welcome, ".concat(netlifyIdentity.currentUser().user_metadata.full_name,"!")})),netlifyIdentity.on("logout",(function(){var e=document.querySelector(".login-text"),t=document.querySelector(".profile-pic");e.style.display="none",t.style.display="none"}))}},{key:"colorHandler",value:function(){var e=this;document.querySelector(".currentColor").addEventListener("click",(function(){e.changeState(".current-btn"),document.querySelector("#primary-color-picker").click()})),document.querySelector(".prevColor").addEventListener("click",(function(){e.changeState(".prev-btn"),document.querySelector("#secondary-color-picker").click()})),document.querySelector(".blue-btn").addEventListener("click",(function(){e.color.changeColor(".blue-btn"),e.changeState(".blue-btn")})),document.querySelector(".red-btn").addEventListener("click",(function(){e.color.changeColor(".red-btn"),e.changeState(".red-btn")})),document.querySelector("#primary-color-picker").addEventListener("input",(function(e){v.fillStyle=e.target.value,document.querySelector(".curr-color").style.background=e.target.value})),document.querySelector("#secondary-color-picker").addEventListener("input",(function(e){v.fillStyle=e.target.value,document.querySelector(".prev-color-btn").style.background=e.target.value}))}},{key:"frameHandler",value:function(){var e=this;document.querySelector(".preview-list").addEventListener("click",(function(t){if(t.target.classList.contains("delete-frame"))e.frame.deleteFrame(t),h.count-=1;else if(t.target.classList.contains("duplicate-frame"))e.frame.duplicateFrame(t);else if(t.target.closest(".preview-tile")){var a=document.querySelectorAll(".preview-tile");[].forEach.call(a,(function(e){e.classList.remove("selected")})),t.target.closest(".preview-tile").classList.add("selected"),e.canvas.updateCanvas()}})),document.querySelector(".add__frame__btn").addEventListener("click",(function(){e.frame.createFrame(h.count),h.count+=1}))}},{key:"fpsHandler",value:function(){document.querySelector(".range-fps").addEventListener("input",(function(){document.querySelector(".display-fps").innerHTML="".concat(document.querySelector(".range-fps").value," FPS"),k(document.querySelector(".range-fps").value)}))}},{key:"saveAsGIFHandler",value:function(){var e=this;document.querySelector(".save-as-gif").addEventListener("click",(function(){e.save.saveAsGIF()})),document.querySelector(".save-as-apng").addEventListener("click",(function(){e.save.saveAsAPNG()}))}},{key:"saveData",value:function(){var e=this;window.addEventListener("beforeunload",(function(){e.canvas.saveCanvas(),e.size.saveSize(),e.tool.saveTool(),e.color.saveColors()}))}},{key:"onMouseMove",value:function(e,t){var a=[Math.floor(e.offsetX/t),Math.floor(e.offsetY/t)],r=a[0],i=a[1];if(s.eraser?v.globalCompositeOperation="destination-out":v.globalCompositeOperation="source-over",f.drawing){var n=this.checkPenSize();s.pencil&&this.canvas.drawLine(u.firstCord,r,u.secondCord,i,n),s.stroke&&this.canvas.drawLine(c.startX,r,c.startY,i,n),s.eraser&&this.canvas.drawLine(u.firstCord,r,u.secondCord,i,n);var o=[r,i];u.firstCord=o[0],u.secondCord=o[1]}}},{key:"checkPenSize",value:function(){var e;return document.querySelector("#penx1").checked?e=1:document.querySelector("#penx2").checked?e=2:document.querySelector("#penx3").checked?e=3:document.querySelector("#penx4").checked&&(e=4),e}},{key:"setToolForDrawing",value:function(e,t){var a=Math.floor(e.offsetX/t),r=Math.floor(e.offsetY/t);u.firstCord=a,u.secondCord=r;var i=[a,r];c.startX=i[0],c.startY=i[1],s.eraser?v.globalCompositeOperation="destination-out":v.globalCompositeOperation="source-over";var n=this.checkPenSize();s.pencil?this.canvas.draw(e,t,n):s.bucket?this.canvas.fillCanvas(a,r):s.colorPicker?this.canvas.pickColor(a,r,e):s.sameFill?this.canvas.fillSameColors(a,r):s.stroke&&this.canvas.draw(e,t,n)}},{key:"handleSize",value:function(e,t,a){localStorage.setItem("canvasW",e),localStorage.setItem("canvasH",e),this.size.setSizeFlagToTrue(t),this.size.changeActiveState(a),this.size.reSize(e,e)}},{key:"changeState",value:function(e){var t=document.querySelectorAll(".button");[].forEach.call(t,(function(e){e.classList.remove("active")})),document.querySelector(e).classList.add("active")}}])&&G(t.prototype,a),r&&G(t,r),e}();a(171);function O(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a.d(t,"default",(function(){return H}));var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=new M,this.canvas=new T,this.frame=new P}var t,a,r;return t=e,(a=[{key:"init",value:function(){this.event.canvasEvents(),this.event.sizeBtnHandler(),this.event.toolsHandler(),this.event.keyShortcutHandler(),this.event.colorHandler(),this.event.saveData(),this.event.frameHandler(),this.event.fpsHandler(),this.event.saveAsGIFHandler(),this.event.fullscreenHandler(),this.event.loginHandler(),this.canvas.loadCanvas(),this.frame.createFrame(0),this.frame.firstFrameOnFirstLoad()}}])&&O(t.prototype,a),r&&O(t,r),e}();(new H).init()}},[[172,0,3]]]);